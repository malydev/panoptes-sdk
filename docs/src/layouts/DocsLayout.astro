---
interface Props {
  title: string;
  description: string;
}

const { title, description } = Astro.props;
import '../styles/global.css';
import { DocsHeader } from '../components/DocsHeader';
import { DocsSidebar } from '../components/DocsSidebar';
---

<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <link rel="icon" type="image/webp" href="/panoptes.webp" />
    <script is:inline>
      // Initialize theme
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const isDark = savedTheme ? savedTheme === 'dark' : prefersDark;
      document.documentElement.classList.toggle('dark', isDark);

      // Initialize language
      const savedLang = localStorage.getItem('lang');
      const lang = savedLang === 'es' || savedLang === 'en' ? savedLang : 'en';
      document.documentElement.setAttribute('data-lang', lang);
      document.documentElement.setAttribute('lang', lang);
    </script>
  </head>
  <body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-200 antialiased">
    <!-- Main container -->
    <div class="flex h-screen overflow-hidden">
      <!-- Desktop Sidebar - Fixed, no scroll -->
      <aside class="hidden md:flex md:w-64 lg:w-72 flex-shrink-0 border-r border-slate-200/60 dark:border-slate-700/50 bg-white dark:bg-slate-950">
        <DocsSidebar client:load />
      </aside>

      <!-- Main content area with header -->
      <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Header - Sticky, only over content -->
        <DocsHeader client:load />

        <!-- Main content - Scrollable -->
        <main class="flex-1 overflow-y-auto">
          <div class="mx-auto w-full max-w-5xl px-4 py-8 sm:px-6 md:px-8 lg:px-12">
            <!-- Content card -->
            <article class="rounded-xl border border-slate-200/60 dark:border-slate-700/50 bg-white dark:bg-gray-900 shadow-lg transition-shadow hover:shadow-xl">
              <div class="prose prose-slate dark:prose-invert max-w-none p-6 md:p-8 lg:p-10">
                <slot />
              </div>
            </article>

            <!-- Footer spacer -->
            <div class="h-16"></div>
          </div>
        </main>
      </div>
    </div>

    <style>
      /* Custom scrollbar styling */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: transparent;
      }

      ::-webkit-scrollbar-thumb {
        background: rgb(203 213 225);
        border-radius: 4px;
      }

      .dark ::-webkit-scrollbar-thumb {
        background: rgb(51 65 85);
      }

      ::-webkit-scrollbar-thumb:hover {
        background: rgb(99 102 241);
      }

      .dark ::-webkit-scrollbar-thumb:hover {
        background: rgb(167 139 250);
      }

      /* Better prose styling for documentation */
      .prose {
        color: rgb(15 23 42);
      }

      .dark .prose {
        color: rgb(226 232 240);
      }

      .prose h1, .prose h2, .prose h3, .prose h4 {
        color: rgb(15 23 42);
      }

      .dark .prose h1, .dark .prose h2, .dark .prose h3, .dark .prose h4 {
        color: rgb(226 232 240);
      }

      .prose a {
        color: rgb(99 102 241);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
      }

      .dark .prose a {
        color: rgb(167 139 250);
      }

      .prose a:hover {
        color: rgb(79 70 229);
        text-decoration: underline;
      }

      .dark .prose a:hover {
        color: rgb(129 140 248);
      }

      .prose code {
        color: rgb(99 102 241);
        font-size: 0.875em;
        font-weight: 500;
        padding: 0.125rem 0.375rem;
        border-radius: 0.25rem;
      }

      .dark .prose code {
        color: rgb(167 139 250);
      }

      .prose pre {
        background: rgb(241 245 249);
      }

      .dark .prose pre {
        background: rgb(2 6 23);
      }

      .prose h1 {
        font-size: 2.5rem;
        font-weight: 800;
        letter-spacing: -0.025em;
        margin-bottom: 1.5rem;
        line-height: 1.1;
      }

      .prose h2 {
        font-size: 1.875rem;
        font-weight: 700;
        letter-spacing: -0.025em;
        margin-top: 2.5rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid rgba(226, 232, 240, 0.6);
      }

      .dark .prose h2 {
        border-bottom: 1px solid rgba(51, 65, 85, 0.5);
      }

      .prose h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 0.75rem;
      }

      .prose p {
        margin-top: 1rem;
        margin-bottom: 1rem;
        line-height: 1.75;
      }

      .prose ul, .prose ol {
        margin-top: 1rem;
        margin-bottom: 1rem;
        padding-left: 1.5rem;
      }

      .prose li {
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
      }

      .prose strong {
        font-weight: 600;
        color: rgb(15 23 42);
      }

      .dark .prose strong {
        color: rgb(226 232 240);
      }

      .prose blockquote {
        color: rgb(71 85 105);
        border-left: 4px solid rgb(99 102 241);
        padding-left: 1rem;
        margin: 1.5rem 0;
        font-style: italic;
      }

      .dark .prose blockquote {
        color: rgb(148 163 184);
        border-left-color: rgb(167 139 250);
      }

      /* Lead text styling */
      .prose .lead {
        font-size: 1.25rem;
        line-height: 1.6;
        color: rgb(71 85 105);
        margin-bottom: 2rem;
      }

      .dark .prose .lead {
        color: rgb(148 163 184);
      }

      /* Table styling */
      .prose table {
        width: 100%;
        margin-top: 2rem;
        margin-bottom: 2rem;
        border-collapse: collapse;
      }

      .prose th {
        background: rgb(255 255 255);
        border-bottom: 2px solid rgba(226, 232, 240, 0.6);
        padding: 0.75rem 1rem;
        text-align: left;
        font-weight: 600;
      }

      .dark .prose th {
        background: rgb(2 6 23);
        border-bottom-color: rgba(51, 65, 85, 0.5);
      }

      .prose td {
        border-bottom: 1px solid rgba(226, 232, 240, 0.6);
        padding: 0.75rem 1rem;
      }

      .dark .prose td {
        border-bottom-color: rgba(51, 65, 85, 0.5);
      }

      .prose tr:hover {
        background: rgb(248 250 252);
      }

      .dark .prose tr:hover {
        background: rgb(15 23 42);
      }

      /* Smooth transitions */
      * {
        transition-property: background-color, border-color, color;
        transition-duration: 150ms;
        transition-timing-function: ease-in-out;
      }
    </style>
  </body>
</html>
